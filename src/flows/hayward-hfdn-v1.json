{
  "id": "hayward-hseries-digital-hfdn-v1",
  "brand": "Hayward",
  "equipmentType": "Heaters",
  "model": "Universal H-Series Digital (HFDN)",
  "title": "Hayward Universal H-Series Digital (HFDN) — Guided Troubleshooting",
  "version": "1.0",
  "description": "Guided diagnostic flow for Hayward Universal H-Series Digital gas heaters (HFDN/FDN models with LCD display). Uses onboard error codes and voltage checks to isolate faults.",
  "start": "enter_code",
  "nodes": {
    "enter_code": {
      "id": "enter_code",
      "text": "Select the error code currently displayed on the heater:",
      "input": "choice",
      "choices": {
        "AO — Blower Vacuum Switch Open": "code_ao",
        "AC — Blower Vacuum Switch Closed": "code_ac",
        "IF — Ignition Failure": "code_if",
        "HS — High Limit or Overheat": "code_hs",
        "LO — Water Pressure or Limit Fault": "code_lo",
        "PF — Polarity / Voltage Fault": "code_pf",
        "CE — Communication Error": "code_ce",
        "EE — Bad Board": "code_ee",
        "HF — Flame Present w/o Gas": "code_hf",
        "SF — Sensor Failure": "code_sf",
        "Other / No Code": "end_other"
      },
      "isEntryPoint": true
    },

    "code_ao": {
      "id": "code_ao",
      "text": "AO = Blower vacuum switch open when it should be closed.\n\n1️⃣ Does the blower start?\n2️⃣ Check vacuum hose to switch — ensure connected and clear.\n3️⃣ During blower run, test continuity across vacuum switch (expect CLOSED / 0 Ω).",
      "input": "yesno",
      "pass": "end_success",
      "fail": "replace_vacuum_switch"
    },

    "code_ac": {
      "id": "code_ac",
      "text": "AC = Blower vacuum switch closed when it should be open.\n\n1️⃣ Disconnect one lead from vacuum switch.\n2️⃣ Check continuity — should read OPEN when blower is off.\nIf stuck closed → replace blower vacuum switch.",
      "input": "yesno",
      "pass": "end_success",
      "fail": "replace_vacuum_switch"
    },

    "code_if": {
      "id": "code_if",
      "text": "IF = Ignition failure.\n\nCheck:\n- Igniter receives 120 VAC during ignition attempt.\n- Verify gas supply and manifold pressure.\n- Flame sensor clean and aligned.\n- Flame rectification current ≥ 1.5 µA DC.",
      "input": "number",
      "unit": "µA",
      "range": [1.5, 10],
      "pass": "end_success",
      "fail": "replace_ignition_control"
    },

    "code_hs": {
      "id": "code_hs",
      "text": "HS = High limit or overheat detected.\n\nPossible causes:\n- Restricted flow (dirty filter or closed valve).\n- Faulty high-limit sensor (should read CLOSED under 135 °F).",
      "input": "yesno",
      "pass": "end_success",
      "fail": "replace_high_limit"
    },

    "code_lo": {
      "id": "code_lo",
      "text": "LO = Water pressure or limit fault.\n\nCheck:\n- Pump on and system fully primed.\n- Pressure switch continuity — should be CLOSED when pump running.\n- Filter and bypass clear of obstruction.",
      "input": "yesno",
      "pass": "end_success",
      "fail": "replace_pressure_switch"
    },

    "code_pf": {
      "id": "code_pf",
      "text": "PF = Polarity or low voltage fault.\n\n1️⃣ Confirm line and neutral orientation.\n2️⃣ Verify ground continuity to chassis.\n3️⃣ Measure supply voltage (expect 110–130 VAC).",
      "input": "number",
      "unit": "VAC",
      "range": [110, 130],
      "pass": "end_success",
      "fail": "replace_board"
    },

    "code_ce": {
      "id": "code_ce",
      "text": "CE = Communication error between main board and display.\n\nInspect ribbon cable for corrosion, pin damage, or loose fit.\nIf intact but code remains → replace display interface.",
      "input": "yesno",
      "pass": "end_success",
      "fail": "replace_display"
    },

    "code_ee": {
      "id": "code_ee",
      "text": "EE = Control board fault.\n\nCycle power. If fault returns immediately, replace main control board.",
      "input": "info",
      "terminal": true
    },

    "code_hf": {
      "id": "code_hf",
      "text": "HF = Flame present when gas valve not energized.\n\n1️⃣ Check flame sense lead for short to ground.\n2️⃣ Verify gas valve operation.\nIf valve closed but flame detected → replace gas valve.",
      "input": "yesno",
      "pass": "end_success",
      "fail": "replace_gas_valve"
    },

    "code_sf": {
      "id": "code_sf",
      "text": "SF = Sensor (thermistor) fault.\n\nCheck inlet/outlet sensor resistance:\n- 77°F ≈ 10 kΩ\n- 104°F ≈ 6 kΩ\n\nIf open or out of range → replace sensor.",
      "input": "number",
      "unit": "kΩ",
      "range": [6, 10],
      "pass": "end_success",
      "fail": "replace_sensor"
    },

    "replace_vacuum_switch": {
      "id": "replace_vacuum_switch",
      "text": "Replace blower vacuum (pressure) switch. Ensure hose and ports are clear post-installation.",
      "input": "info",
      "terminal": true
    },

    "replace_ignition_control": {
      "id": "replace_ignition_control",
      "text": "Replace ignition control module. Verify correct connections before reattempting ignition.",
      "input": "info",
      "terminal": true
    },

    "replace_pressure_switch": {
      "id": "replace_pressure_switch",
      "text": "Replace defective pressure switch and confirm proper flow.",
      "input": "info",
      "terminal": true
    },

    "replace_high_limit": {
      "id": "replace_high_limit",
      "text": "Replace high-limit sensor(s). Confirm cutoff near 135 °F and verify continuity when cool.",
      "input": "info",
      "terminal": true
    },

    "replace_board": {
      "id": "replace_board",
      "text": "Replace main control board. Reconnect all harnesses securely and verify startup.",
      "input": "info",
      "terminal": true
    },

    "replace_display": {
      "id": "replace_display",
      "text": "Replace display interface board. Ensure ribbon cable seats properly and no corrosion present.",
      "input": "info",
      "terminal": true
    },

    "replace_gas_valve": {
      "id": "replace_gas_valve",
      "text": "Replace gas valve. Perform leak test before startup.",
      "input": "info",
      "terminal": true
    },

    "replace_sensor": {
      "id": "replace_sensor",
      "text": "Replace temperature sensor (thermistor) and confirm correct reading at ambient temperature.",
      "input": "info",
      "terminal": true
    },

    "end_success": {
      "id": "end_success",
      "text": "✅ Fault cleared — heater operating normally after corrective action.",
      "input": "info",
      "terminal": true,
      "success": true
    },

    "end_other": {
      "id": "end_other",
      "text": "If no error code displayed or issue persists, document readings and contact Hayward Technical Support.",
      "input": "info",
      "terminal": true
    }
  }
}