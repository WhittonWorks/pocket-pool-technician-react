{
  "id": "jandy-jxi-v1",
  "brand": "Jandy",
  "equipmentType": "Heaters",
  "model": "JXi",
  "title": "Jandy JXi Heater (Rev G & Rev H) — Guided Troubleshooting",
  "start": "enter_serial",
  "nodes": {
    "enter_serial": {
      "id": "enter_serial",
      "text": "Enter the full serial number from the JXi heater.\n\n- Rev G or earlier: starts with B and is 9 characters long (2017 & earlier)\n- Rev H or newer: starts with LB and is 18 characters long (2018+)",
      "input": "text",
      "logic": [
        { "if": "value.startsWith('B') && !value.startsWith('LB')", "goto": "rev_g_start" },
        { "if": "value.startsWith('LB')", "goto": "rev_h_start" }
      ],
      "default": "invalid_serial"
    },

    "invalid_serial": {
      "id": "invalid_serial",
      "text": "❌ Invalid serial number. Try again.\nExpected formats:\n- Rev G or earlier = B#####\n- Rev H or newer = LB#####",
      "input": "info",
      "pass": "enter_serial"
    },

   
    "rev_g_start": {
      "id": "rev_g_start",
      "text": "Which input voltage is the JXi Rev G configured for?",
      "input": "choice",
      "choices": { "120 V": "rev_g_120", "240 V": "rev_g_240" }
    },

    "rev_g_120": {
      "id": "rev_g_120",
      "text": "Measure power at Distribution Board (Black C → Red B). Expect 110–126 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [110, 126],
      "pass": "rev_g_step2",
      "fail": "fix_power",
      "isEntryPoint": true
    },
    "rev_g_240": {
      "id": "rev_g_240",
      "text": "Measure power at Distribution Board (Black C → Red B). Expect 220–252 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [220, 252],
      "pass": "rev_g_step2",
      "fail": "fix_power",
      "isEntryPoint": true
    },

    "rev_g_step2": {
      "id": "rev_g_step2",
      "text": "Measure transformer output (Red 2 → Yellow 1). Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_step3",
      "fail": "rev_g_step2_check_input"
    },
    "rev_g_step2_check_input": {
      "id": "rev_g_step2_check_input",
      "text": "Measured transformer output below 22 VAC.\n\nVerify incoming voltage (110–126 or 220–252 VAC). If input correct and output low → replace transformer.",
      "input": "info",
      "pass": "rev_g_step3"
    },

    "rev_g_step3": {
      "id": "rev_g_step3",
      "text": "Check PIB fuse continuity. Good?",
      "input": "yesno",
      "pass": "rev_g_step4",
      "fail": "rev_g_step2"
    },

    "rev_g_step4": {
      "id": "rev_g_step4",
      "text": "Check Water Pressure Switch: 24 VAC Purple (4) and Ground. Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_step5",
      "fail": "rev_g_step3"
    },

    "rev_g_step5": {
      "id": "rev_g_step5",
      "text": "Check Fusible Link chain: Check from Orange (6) to Ground  22–26 VAC?",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_blower",
      "fail": "rev_g_step4"
    },

    "rev_g_blower": {
      "id": "rev_g_blower",
      "text": "Does the blower motor run?",
      "input": "yesno",
      "pass": "rev_g_igniter",
      "fail": "rev_g_step5",
      "isEntryPoint": true
    },

    "rev_g_igniter": {
      "id": "rev_g_igniter",
      "text": "After blower starts, does the Hot Surface Igniter glow?",
      "input": "yesno",
      "pass": "rev_g_gas",
      "fail": "rev_g_igniter_check_input",
      "isEntryPoint": true
    },
    "rev_g_igniter_check_input": {
      "id": "rev_g_igniter_check_input",
      "text": "Measure voltage at Ignition Control K & I terminals during ignition. Expect 105–130 VAC.\n\nIf no voltage → verify 24 VAC to board.\nIf voltage present → check ignitor continuity.",
      "input": "number",
      "unit": "VAC",
      "range": [105, 130],
      "pass": "rev_g_igniter_check_continuity",
      "fail": "rev_g_igniter_no_power"
    },
    "rev_g_igniter_check_continuity": {
      "id": "rev_g_igniter_check_continuity",
      "text": "With power off and ignitor cool, check continuity between ignitor leads.\n\n✅ Continuity present → ignitor intact.\n❌ Open circuit → replace ignitor.\n(Optional) Cold resistance ≈ 40–75 Ω; > 90 Ω = weak element.",
      "input": "yesno",
      "pass": "rev_g_gas",
      "fail": "replace_ignitor"
    },
    "rev_g_igniter_no_power": {
      "id": "rev_g_igniter_no_power",
      "text": "No 120 VAC to ignitor. Verify ignition control receives 24 VAC and ground. If 24 VAC present but no output, replace ignition control.",
      "input": "info",
      "terminal": true
    },
    "replace_ignitor": {
      "id": "replace_ignitor",
      "text": "Replace Hot Surface Ignitor. Verify connections and ceramic integrity before restart.",
      "input": "info",
      "terminal": true
    },

    "rev_g_gas": {
      "id": "rev_g_gas",
      "text": "Check for approx. 24 VAC at Brown (gas valve) → Yellow (Ground). Is voltage Present?",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_flame",
      "fail": "rev_g_igniter"
    },

    "rev_g_flame": {
      "id": "rev_g_flame",
      "text": "Do burners ignite and stay lit > 7 s?",
      "input": "yesno",
      "pass": "rev_g_success",
      "fail": "rev_g_gas"
    },

    "rev_g_success": {
      "id": "rev_g_success",
      "text": "✅ Rev G heater operating normally.",
      "input": "info",
      "terminal": true,
      "success": true
    },

    
    "rev_h_start": {
      "id": "rev_h_start",
      "text": "Which input voltage is the JXi Rev H configured for?",
      "input": "choice",
      "choices": { "120 V": "rev_h_120", "240 V": "rev_h_240" }
    },

    "rev_h_120": {
      "id": "rev_h_120",
      "text": "Measure power at Distribution Board (Black C → Red B). Expect 110–126 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [110, 126],
      "pass": "rev_h_step2",
      "fail": "fix_power",
      "isEntryPoint": true
    },
    "rev_h_240": {
      "id": "rev_h_240",
      "text": "Measure at Distribution Board from Black C to  Red B`  . Expect 220–252 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [220, 252],
      "pass": "rev_h_step2",
      "fail": "fix_power",
      "isEntryPoint": true
    },

    "rev_h_step2": {
      "id": "rev_h_step2",
      "text": "Measure transformer output (Between Red 2 and Yellow Ground 1). Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_step3",
      "fail": "rev_h_step2_check_input"
    },
    "rev_h_step2_check_input": {
      "id": "rev_h_step2_check_input",
      "text": "Measured transformer output below 22 VAC.\n\nVerify incoming voltage (110–126 / 220–252 VAC). If input correct and output low → replace transformer. (P/N R0456301)",
      "input": "info",
      "pass": "rev_h_step3"
    },

    "rev_h_step3": {
      "id": "rev_h_step3",
      "text": "Check PIB fuse continuity. Good?",
      "input": "yesno",
      "pass": "rev_h_step4",
      "fail": "rev_h_step2"
    },

    "rev_h_step4": {
      "id": "rev_h_step4",
      "text": "Water Pressure Switch: Check for 24 VAC between Purple (4) and Yellow (Ground). Check for 24 VAC between Gray (5) and Yellow (Ground) Expect 22–26 VAC. " ,
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_step5",
      "fail": "rev_h_pressure_switch_failed"
    },

     "rev_h_pressure_switch_failed": {
     "id": "rev_h_pressure_switch_failed",
     "text": "Voltage is 0 or below spec — Verify filter pump is on, filter is clean, and filter pressure is above 2 psi. If Filter pressure is above 2 psi and the pressure switch is still open, replace pressure switch (P/N R0457001) ",
     "input": "info",
     "pass": "rev_h_blower"
   },

    "rev_h_step5": {
      "id": "rev_h_step5",
      "text": "High Limits: Check for 24 VAC from each leg of high limits to ground. What was the voltage between each leg and ground?",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_blower",
      "fail": "rev_h_highlimit_failed"
    },

    "rev_h_highlimit_failed": {
     "id": "rev_h_highlimit_failed",
     "text": "Below expected Voltage — one or more high limit switches are open. Replace both high limits (P/N R0592300), then continue diagnostics.",
     "input": "info",
     "pass": "rev_h_blower"
    },

    "rev_h_blower": {
      "id": "rev_h_blower",
      "text": "Does the blower motor run?",
      "input": "yesno",
      "pass": "rev_h_igniter",
      "fail": "rev_h_step5",
      "isEntryPoint": true
    },

    "rev_h_igniter": {
      "id": "rev_h_igniter",
      "text": "After blower starts, does the Hot Surface Igniter glow?",
      "input": "yesno",
      "pass": "rev_h_gas",
      "fail": "rev_h_igniter_check_input",
      "isEntryPoint": true
    },
    "rev_h_igniter_check_input": {
      "id": "rev_h_igniter_check_input",
      "text": "Measure voltage at Ignition Control K & I terminals during ignition. Expect 105–130 VAC.\n\nIf no voltage → verify 24 VAC supply.\nIf voltage present → check ignitor continuity.",
      "input": "number",
      "unit": "VAC",
      "range": [105, 130],
      "pass": "rev_h_igniter_check_continuity",
      "fail": "rev_h_igniter_no_power"
    },
    "rev_h_igniter_check_continuity": {
      "id": "rev_h_igniter_check_continuity",
      "text": "With power off and ignitor cool, check continuity between ignitor leads.\n\n✅ Continuity present → ignitor intact.\n❌ Open circuit → replace ignitor.",
      "input": "yesno",
      "pass": "rev_h_gas",
      "fail": "replace_ignitor"
    },
    "rev_h_igniter_no_power": {
      "id": "rev_h_igniter_no_power",
      "text": "No 120 VAC to ignitor. Verify ignition control receives 24 VAC and ground. If 24 VAC present but no output, replace ignition control.",
      "input": "info",
      "terminal": true
    },

    "rev_h_gas": {
      "id": "rev_h_gas",
      "text": "Check for approx. 24 VAC at Brown (gas valve) → Yellow (Ground). Is voltage Present?",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_flame",
      "fail": "rev_h_igniter"
    },

    "rev_h_flame": {
      "id": "rev_h_flame",
      "text": "Do burners ignite and stay lit > 7 s?",
      "input": "yesno",
      "pass": "rev_h_success",
      "fail": "rev_h_gas"
    },

    "rev_h_success": {
      "id": "rev_h_success",
      "text": "✅ Rev H heater operating normally.",
      "input": "info",
      "terminal": true,
      "success": true
    },

    "fix_power": {
      "id": "fix_power",
      "text": "Correct incoming power / breaker / wiring to heater before continuing.",
      "input": "info",
      "terminal": true
    }
  }
}