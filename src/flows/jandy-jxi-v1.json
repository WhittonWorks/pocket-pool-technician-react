{
  "id": "jandy-jxi-v1",
  "brand": "Jandy",
  "equipmentType": "Heaters",
  "model": "JXi",
  "title": "Jandy JXi Heater (Rev G & Rev H) — Guided Troubleshooting",
  "start": "enter_serial",
  "nodes": {
    "enter_serial": {
      "id": "enter_serial",
      "text": "Enter the full serial number from the JXi heater.\n\n- Rev G or earlier: starts with B and is 9 characters long (2017 & earlier)\n- Rev H or newer: starts with LB and is 18 characters long (2018+)",
      "input": "text",
      "logic": [
        { "if": "value.startsWith('B') && !value.startsWith('LB')", "goto": "rev_g_start" },
        { "if": "value.startsWith('LB')", "goto": "rev_h_start" }
      ],
      "default": "invalid_serial"
    },
    "invalid_serial": {
      "id": "invalid_serial",
      "text": "❌ Invalid serial number. Try again.\nExpected formats:\n- Rev G or earlier = B#####\n- Rev H or newer = LB#####",
      "input": "info",
      "pass": "enter_serial"
    },

    "rev_g_start": {
      "id": "rev_g_start",
      "text": "Which input voltage is the JXi Rev G configured for?",
      "input": "choice",
      "choices": { "120 V": "rev_g_120", "240 V": "rev_g_240" }
    },

    "rev_g_120": {
      "id": "rev_g_120",
      "text": "Measure power at Distribution Board (Black C → Red B). Expect 110–126 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [110, 126],
      "pass": "rev_g_step2",
      "fail": "critical_stop_line_power",
      "isEntryPoint": true
    },
    "rev_g_240": {
      "id": "rev_g_240",
      "text": "Measure power at Distribution Board (Black C → Red B). Expect 220–252 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [220, 252],
      "pass": "rev_g_step2",
      "fail": "critical_stop_line_power",
      "isEntryPoint": true
    },

    "rev_g_step2": {
      "id": "rev_g_step2",
      "text": "Measure transformer output (Red 2 → Yellow 1). Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_step3",
      "fail": "critical_stop_transformer"
    },

    "rev_g_step3": {
      "id": "rev_g_step3",
      "text": "Check PIB fuse continuity. Good?",
      "input": "yesno",
      "pass": "rev_g_step4",
      "fail": "critical_stop_pib_fuse"
    },

    "rev_g_step4": {
      "id": "rev_g_step4",
      "text": "Check Water Pressure Switch: 24 VAC Purple (4) and Ground. Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_step5",
      "fail": "rev_g_step3"
    },

    "rev_g_step5": {
      "id": "rev_g_step5",
      "text": "Check Fusible Link chain: Check from Orange (6) to Ground. Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_blower",
      "fail": "rev_g_step4"
    },

    "rev_g_blower": {
      "id": "rev_g_blower",
      "text": "Does the blower motor run?",
      "input": "yesno",
      "pass": "rev_g_igniter",
      "fail": "critical_stop_pib_board",
      "isEntryPoint": true
    },

    "rev_g_igniter": {
      "id": "rev_g_igniter",
      "text": "After blower starts, does the Hot Surface Igniter glow?",
      "input": "yesno",
      "pass": "rev_g_gas",
      "fail": "rev_g_igniter_check_input"
    },

    "rev_g_igniter_check_input": {
      "id": "rev_g_igniter_check_input",
      "text": "Measure voltage at Ignition Control K & I terminals during ignition. Expect 105–130 VAC.\n\nIf no voltage → verify 24 VAC to board.\nIf voltage present → check ignitor continuity.",
      "input": "number",
      "unit": "VAC",
      "range": [105, 130],
      "pass": "rev_g_igniter_check_continuity",
      "fail": "critical_stop_icb"
    },

    "rev_g_igniter_check_continuity": {
      "id": "rev_g_igniter_check_continuity",
      "text": "With power off and ignitor cool, check continuity between ignitor leads.\n\n✅ Continuity present → ignitor intact.\n❌ Open circuit → replace ignitor.",
      "input": "yesno",
      "pass": "rev_g_gas",
      "fail": "replace_ignitor"
    },

    "replace_ignitor": {
      "id": "replace_ignitor",
      "text": "Replace Hot Surface Ignitor (P/N R0452300). Verify connections and ceramic integrity before restart.",
      "input": "info",
      "terminal": true,
      "exportReport": true
    },

    "rev_g_gas": {
      "id": "rev_g_gas",
      "text": "Check for approx. 24 VAC at Brown (gas valve) → Yellow (Ground). Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_g_flame",
      "fail": "critical_stop_icb"
    },

    "rev_g_flame": {
      "id": "rev_g_flame",
      "text": "Do burners ignite and stay lit > 7 s?",
      "input": "yesno",
      "pass": "rev_g_success",
      "fail": "rev_g_gas"
    },

    "rev_g_success": {
      "id": "rev_g_success",
      "text": "✅ Rev G heater operating normally.",
      "input": "info",
      "terminal": true,
      "success": true,
      "exportReport": true
    },

    "rev_h_start": {
      "id": "rev_h_start",
      "text": "Which input voltage is the JXi Rev H configured for?",
      "input": "choice",
      "choices": { "120 V": "rev_h_120", "240 V": "rev_h_240" }
    },

    "rev_h_120": {
      "id": "rev_h_120",
      "text": "Measure power at Distribution Board (Black C → Red B). Expect 110–126 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [110, 126],
      "pass": "rev_h_step2",
      "fail": "critical_stop_line_power"
    },

    "rev_h_240": {
      "id": "rev_h_240",
      "text": "Measure at Distribution Board from Black to Red. Expect 220–252 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [220, 252],
      "pass": "rev_h_step2",
      "fail": "critical_stop_line_power"
    },

    "rev_h_step2": {
      "id": "rev_h_step2",
      "text": "Measure transformer output (Red 2 → Yellow Ground 1). Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_step3",
      "fail": "critical_stop_transformer"
    },

    "rev_h_step3": {
      "id": "rev_h_step3",
      "text": "Check PIB fuse continuity. Good?",
      "input": "yesno",
      "pass": "rev_h_step4",
      "fail": "critical_stop_pib_fuse"
    },

    "rev_h_step4": {
      "id": "rev_h_step4",
      "text": "Water Pressure Switch: Check 24 VAC between Purple (4) and Ground, then Gray (5) and Ground. Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_step5",
      "fail": "rev_h_pressure_switch_failed"
    },

    "rev_h_pressure_switch_failed": {
      "id": "rev_h_pressure_switch_failed",
      "text": "Voltage 0 or below spec — verify pump on and filter clean. If pressure > 2 psi and switch still open, replace Pressure Switch (P/N R0457001).",
      "input": "info",
      "pass": "rev_h_step5"
    },

    "rev_h_step5": {
      "id": "rev_h_step5",
      "text": "High Limits: Check for 24 VAC from each leg of high limits to ground (Expect 22–26 VAC).",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_blower",
      "fail": "rev_h_highlimit_failed"
    },

    "rev_h_highlimit_failed": {
      "id": "rev_h_highlimit_failed",
      "text": "Below expected voltage — one or more high-limit switches are open. Replace both High Limits (P/N R0592300), then continue.",
      "input": "info",
      "pass": "rev_h_blower"
    },

    "rev_h_blower": {
      "id": "rev_h_blower",
      "text": "Does the blower motor run?",
      "input": "yesno",
      "pass": "rev_h_igniter",
      "fail": "critical_stop_pib_board"
    },

    "rev_h_igniter": {
      "id": "rev_h_igniter",
      "text": "After blower starts, does the Hot Surface Igniter glow?",
      "input": "yesno",
      "pass": "rev_h_gas",
      "fail": "rev_h_igniter_check_input"
    },

    "rev_h_igniter_check_input": {
      "id": "rev_h_igniter_check_input",
      "text": "Measure voltage at Ignition Control K & I terminals during ignition (Expect 105–130 VAC). If no voltage → verify 24 VAC supply. If voltage present → check ignitor continuity.",
      "input": "number",
      "unit": "VAC",
      "range": [105, 130],
      "pass": "rev_h_igniter_check_continuity",
      "fail": "critical_stop_icb"
    },

    "rev_h_igniter_check_continuity": {
      "id": "rev_h_igniter_check_continuity",
      "text": "With power off and ignitor cool, check continuity between ignitor leads. ✅ Continuity present → ignitor intact. ❌ Open circuit → replace ignitor (P/N R0452300).",
      "input": "yesno",
      "pass": "rev_h_gas",
      "fail": "replace_ignitor"
    },

    "rev_h_gas": {
      "id": "rev_h_gas",
      "text": "Check for approx. 24 VAC at Brown (gas valve) → Yellow (Ground). Expect 22–26 VAC.",
      "input": "number",
      "unit": "VAC",
      "range": [22, 26],
      "pass": "rev_h_flame",
      "fail": "critical_stop_icb"
    },

    "rev_h_flame": {
      "id": "rev_h_flame",
      "text": "Do burners ignite and stay lit > 7 s?",
      "input": "yesno",
      "pass": "rev_h_success",
      "fail": "rev_h_gas"
    },

    "rev_h_success": {
      "id": "rev_h_success",
      "text": "✅ Rev H heater operating normally.",
      "input": "info",
      "terminal": true,
      "success": true,
      "exportReport": true
    },

    "critical_stop_line_power": {
      "id": "critical_stop_line_power",
      "text": "❌ Line Power Failure — No incoming 120/240 VAC to heater.\nVerify breaker, wiring, and disconnect. Cannot continue until power restored.",
      "input": "info",
      "terminal": true,
      "exportReport": true
    },
    "critical_stop_transformer": {
      "id": "critical_stop_transformer",
      "text": "❌ Transformer failure (P/N R0456301). Measured 0 VAC output — expected 22–26 VAC. Replace before continuing diagnostics.",
      "input": "info",
      "terminal": true,
      "exportReport": true
    },
    "critical_stop_pib_fuse": {
      "id": "critical_stop_pib_fuse",
      "text": "❌ PIB Fuse Open (P/N R0384900). Heater control power interrupted. Replace fuse and restart diagnostics.",
      "input": "info",
      "terminal": true,
      "exportReport": true
    },
    "critical_stop_pib_board": {
      "id": "critical_stop_pib_board",
      "text": "❌ PIB Board Failure — no low-voltage response after 24 VAC confirmed. Replace PIB Board before continuing.",
      "input": "info",
      "terminal": true,
      "exportReport": true
    },
    "critical_stop_icb": {
      "id": "critical_stop_icb",
      "text": "❌ Ignition Control (ICB) failure — no output voltage to gas valve or ignitor. Replace ICB module (P/N R0452500).",
      "input": "info",
      "terminal": true,
      "exportReport": true
    },
    "critical_stop_comms": {
      "id": "critical_stop_comms",
      "text": "❌ Communication Error (EE/CE Code) — EEPROM or display ICB link failure. Replace display board or ICB as needed.",
      "input": "info",
      "terminal": true,
      "exportReport": true
    },

    "fix_power": {
      "id": "fix_power",
      "text": "Correct incoming power / breaker / wiring to heater before continuing.",
      "input": "info",
      "terminal": true
    }
  }
}